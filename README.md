# Параллельное программирование в Go: Channel & WaitGroups

Этот проект содержит примеры по параллельному программированию в Go, иллюстрирующие использование каналов (Channels) и групп ожидания (WaitGroups).

## Содержание

В проекте представлены следующие примеры:

1. **Базовые горутины** - демонстрация работы горутин
2. **Небуферизованные каналы** - работа с небуферизованными каналами
3. **Буферизованные каналы** - работа с буферизованными каналами
4. **Направленные каналы** - использование каналов с ограниченным направлением
   - Генераторы данных 
   - Трансформеры (промежуточная обработка)
   - Потребители результатов
5. **Закрытие каналов** - демонстрация закрытия и перебора каналов
6. **WaitGroups** - базовое использование групп ожидания
   - Базовый пример с фиксированным числом горутин
   - Динамическое добавление горутин в WaitGroup
7. **Гонка данных** - проблема гонки данных и способы ее решения
   - Демонстрация проблемы гонки данных
   - Решение с использованием каналов
   - Решение с использованием мьютексов
   - Решение с использованием атомарных операций
   - Сравнение производительности разных решений
8. **Комбинированный пример** - совместное использование каналов и групп ожидания
   - Базовый пример пула воркеров
   - Пул воркеров с таймаутом (использование context.WithTimeout)
   - Пул воркеров с отменой (использование context.WithCancel)

## Структура проекта

```
/
├── cmd/                    # Исполняемые приложения
│   └── app/                # Основное приложение
│       └── main.go         # Точка входа
│
├── pkg/                    # Пакеты проекта (в pkg, чтобы можно было сделать go get из другого проекта)
│   ├── examples/           # Примеры использования параллельных примитивов
│   │   ├── basic_goroutine/        # Базовые примеры горутин
│   │   ├── buffered_channel/       # Примеры буферизованных каналов
│   │   ├── closed_channel/         # Примеры закрытия каналов
│   │   ├── combined/               # Комбинированные примеры (каналы + WaitGroups)
│   │   ├── directed_channels/      # Примеры направленных каналов
│   │   ├── race_condition/         # Примеры гонок данных и их решения
│   │   ├── unbuffered_channel/     # Примеры небуферизованных каналов
│   │   └── waitgroups/             # Примеры использования WaitGroups
│   │
│   ├── tasks/              # Задания для практики
│   │   ├── solutions/      # Решения заданий
│   │   ├── stubs/          # Заготовки для заданий
│   │   └── tasks.md        # Описание заданий
│   │
│   └── fixme/              # Задачи для исправления ошибок
│       ├── channel_worker.go         # Задача на исправление воркера с каналами
│       ├── channel_worker_test.go    # Тесты для проверки решения
│       ├── parallel_sum_test.go      # Тесты для проверки решения параллельного суммирования
│       ├── sum_array.go              # Задача на исправление параллельного суммирования
│       ├── wait_group.go             # Задача на исправление WaitGroup
│       ├── wait_group_test.go        # Тесты для проверки решения WaitGroup
│       └── solutions/                # Решения задач fixme
│           ├── channel_worker.go     # Исправленная реализация воркера с каналами
│           ├── sum_array.go          # Исправленная реализация параллельного суммирования
│           └── wait_group.go         # Исправленная реализация WaitGroup
│
├── go.mod                  # Описание модуля Go
├── .gitignore              # Файлы, игнорируемые Git
└── README.md               # Данный файл с описанием проекта
```

## Документация

Подробный отчет с теоретическими материалами и объяснениями доступен в файле `parallel-programming.pdf`.

## Как запустить

Для запуска всех примеров используйте:

```bash
go run cmd/app/main.go all
```

Для запуска конкретного примера:

```bash
go run cmd/app/main.go [имя_примера]
```

Где `[имя_примера]` может быть одним из следующих:
- `goroutine` - базовый пример горутин
- `unbuffered` - небуферизованный канал
- `buffered` - буферизованный канал
- `directed` - направленные каналы
- `closed` - закрытие канала
- `waitgroups` - группы ожидания
- `race` - пример гонки данных и решения
- `combined` - комбинированное использование каналов и групп ожидания

## Тестирование

Для запуска всех тестов используйте:

```bash
go test ./...
```

Для запуска тестов с выводом результатов:

```bash
go test ./pkg/examples/... -v
```

Для запуска тестов отдельного пакета:

```bash
go test ./pkg/examples/race_condition/... -v
```

## Задачи fixme

В директории `pkg/fixme` содержатся задачи, в которых нужно исправить ошибки в коде:

1. **sum_array.go** - неправильная реализация параллельного суммирования массива
2. **wait_group.go** - неправильная реализация обработки данных с WaitGroup
3. **channel_worker.go** - неправильная реализация шаблона рабочих потоков с каналами

Исправленные решения для этих задач находятся в директории `pkg/fixme/solutions/`.

## Авторы

Успанов Н.Н., Жаворонков А.О. 